<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>åˆæœŸè¨­å®š</title>
    <style>
        /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .menu-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #2a7ae2;
            padding: 10px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }
        .menu-btn {
            margin: 0 15px;
            text-decoration: none;
            color: #fff;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .menu-icon {
            font-size: 1.5em;
        }
        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼åˆ†ã®ä½™ç™½ã‚’ç¢ºä¿ */
        .content {
            padding-top: 60px; /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã®é«˜ã•ï¼‹ä½™ç™½ */
        }
        /* ãƒšãƒ¼ã‚¸å…±é€šã®ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            font-family: Arial, sans-serif;
            padding: 1em 2em;
        }
        h1, h2 {
            margin-bottom: 0.5em;
        }
        label {
            display: block;
            margin-top: 0.5em;
        }
        input {
            padding: 0.3em;
            box-sizing: border-box;
        }
        fieldset {
            margin-top: 1em;
            padding: 1em;
            border: 1px solid #ccc;
        }
        legend {
            font-weight: bold;
        }
        button {
            margin-top: 1.5em;
            padding: 0.5em 1em;
            background-color: #4CAF50;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 4px;
        }
        button:hover {
            background-color: #45a049;
        }
        .back-link {
            display: inline-block;
            margin-top: 2em;
            padding: 8px 16px;
            background: #ccc;
            color: #000;
            text-decoration: none;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ -->
    <div class="menu-bar">
        <!-- ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
        <a href="{{ url_for('index') }}" class="menu-btn" title="ãƒ¡ã‚¤ãƒ³ç”»é¢">
            <span class="menu-icon">ğŸ </span>
            <span class="menu-text">ãƒ¡ã‚¤ãƒ³</span>
        </a>
        <!-- ã‚¿ã‚¹ã‚¯è¿½åŠ ç”»é¢ -->
        <a href="{{ url_for('add_task') }}" class="menu-btn" title="ã‚¿ã‚¹ã‚¯è¿½åŠ ">
            <span class="menu-icon">â•</span>
            <span class="menu-text">è¿½åŠ </span>
        </a>
        <!-- è¨­å®šç”»é¢ -->
        <a href="{{ url_for('setup') }}" class="menu-btn" title="è¨­å®š">
            <span class="menu-icon">âš™ï¸</span>
            <span class="menu-text">è¨­å®š</span>
        </a>
    </div>

    <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„éƒ¨åˆ† -->
    <div class="content">
        <h1>åˆæœŸè¨­å®š</h1>

        <form method="POST" id="setupForm">
            <h2>1. å„æ›œæ—¥ã®èª²é¡Œã«ä½¿ãˆã‚‹æ™‚é–“ï¼ˆåˆ†ï¼‰</h2>
            {% for day in ["æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ", "æ—¥"] %}
                <label>
                    {{ day }}æ›œæ—¥:
                    <input type="number" name="available_{{ loop.index0 }}" min="0" required>
                </label>
            {% endfor %}

            <h2>2. å„æ›œæ—¥ã®æ™‚é–“å‰²ï¼ˆ1é™ï½5é™ï¼‰</h2>
            {# æ™‚é–“å‰²ç™»éŒ²ã¯ã€Œæœˆã€ï½ã€ŒåœŸã€ã¾ã§ã«é™å®š #}
            {% for day in ["æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ"] %}
                {% set day_index = loop.index0 %}
                <fieldset>
                    <legend>{{ day }}æ›œæ—¥</legend>
                    {% for period in range(1, 6) %}
                        <label>
                            {{ period }}é™:
                            <input type="text" name="timetable_{{ day_index }}_{{ period }}" style="width: auto;">
                        </label>
                    {% endfor %}
                </fieldset>
            {% endfor %}

            <button type="submit">ä¿å­˜</button>
        </form>

        <!-- å…ƒã®ç”»é¢ï¼ˆãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼‰ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
        <a href="{{ url_for('index') }}" class="back-link">â† æˆ»ã‚‹</a>

        <script>
          // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã« localStorage ã‹ã‚‰å€¤ã‚’èª­ã¿è¾¼ã¿ã€å„å…¥åŠ›æ¬„ã«ã‚»ãƒƒãƒˆã™ã‚‹
          function loadSettings() {
              document.querySelectorAll('#setupForm input').forEach(input => {
                  const key = 'setup_' + input.name;
                  const savedValue = localStorage.getItem(key);
                  if (savedValue !== null) {
                      input.value = savedValue;
                  }
              });
          }

          // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã«ã€å„å…¥åŠ›æ¬„ã®å€¤ã‚’ localStorage ã«ä¿å­˜ã™ã‚‹
          function saveSettings() {
              document.querySelectorAll('#setupForm input').forEach(input => {
                  const key = 'setup_' + input.name;
                  localStorage.setItem(key, input.value);
              });
          }

          // èª­ã¿è¾¼ã¿æ™‚ã«è¨­å®šã‚’åæ˜ 
          window.addEventListener('load', loadSettings);

          // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã«è¨­å®šã‚’ä¿å­˜
          document.getElementById('setupForm').addEventListener('submit', function() {
              saveSettings();
          });
        </script>
    </div>
</body>
</html>
